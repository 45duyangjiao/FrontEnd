<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black">
        <link href="../css/mui.min.css" rel="stylesheet" />
		<link href="../css/common.css" rel="stylesheet" />
		<link href="../css/newList.css" rel="stylesheet" />
		<title>新闻列表页</title>
	</head>
	<body>
		<div class="mui-content">
			<div id="slider" class="mui-slider mui-fullscreen">

				<div style="width:90%;float:left;background:#fff;padding-left:0.3rem;">
					<div id="sliderSegmentedControl" class="mui-scroll-wrapper mui-slider-indicator mui-segmented-control mui-segmented-control-inverted">
						<div class="mui-scroll newList">
						</div>
					</div>
				</div>
				
				<div class="navAdd" style="width: 10%;float: right;"><i></i></div>
				<div style="clear: both;"></div>
				<div class="mui-slider-group">
					
					<!--<div id="3" class="mui-slider-item mui-control-content">
						<div class="mui-scroll-wrapper">
							<div class="mui-scroll">
								<ul class="mui-table-view">
								    
								     <li class="mui-table-view-cell viewcellHeight">
								        <div class="muipurelyTitle">中国女子跆拳道队蝉联2016世界杯女子团</div>
								        <div class="muipurelyImg" id="purelyImg">
								        	<img src="../img/timg.jpg" alt=""/>
								        	<img src="../img/timg2.jpg" alt=""/>
								        	<img src="../img/timg3.jpg" alt=""/>
								        </div>
								        <div class="muipurelytext ">								        
								        	<p class="muipurelylook clearfix"><span class="lookLeft">2017年5月20日 CCTV5</span><span class="lookRight"><i class="look"></i> 1.5万</span></p>
								        </div>
								    </li>
								   <li class="mui-table-view-cell">
								        <div class="mui-table-Img"><img src="../img/img1.png"/></div>
								        <div class="mui-table-text">
								        	<p class="mui-table-Tile">2017年全国大众跆拳道一级以上裁判员年审复训培训班</p>
								        	<p class="mui-table-look"><span class="lookLeft">2017年5月20日 中跆协官网</span><span class="lookRight"><i class="look"></i> 5686</span></p>
								        </div>
								    </li>
								</ul>
							</div>
						</div>
					</div>
					
					<div id="5" class="mui-slider-item mui-control-content">
						<div class="mui-scroll-wrapper">
							<div class="mui-scroll">
								<ul class="mui-table-view">
								    
								     <li class="mui-table-view-cell viewcellHeight">
								        <div class="muipurelyTitle">中国女子跆拳道队蝉联2016世界杯女子团</div>
								        <div class="muipurelyImg" id="purelyImg">
								        	<img src="../img/timg.jpg" alt=""/>
								        	<img src="../img/timg2.jpg" alt=""/>
								        	<img src="../img/timg3.jpg" alt=""/>
								        </div>
								        <div class="muipurelytext ">								        
								        	<p class="muipurelylook clearfix"><span class="lookLeft">2017年5月20日 CCTV5</span><span class="lookRight"><i class="look"></i> 1.5万</span></p>
								        </div>
								    </li>
								   <li class="mui-table-view-cell">
								        <div class="mui-table-Img"><img src="../img/img1.png"/></div>
								        <div class="mui-table-text">
								        	<p class="mui-table-Tile">2017年全国大众跆拳道一级以上裁判员年审复训培训班</p>
								        	<p class="mui-table-look"><span class="lookLeft">2017年5月20日 中跆协官网</span><span class="lookRight"><i class="look"></i> 5686</span></p>
								        </div>
								    </li>
								</ul>
							</div>
						</div>
					</div>
					
					-->
				</div>
			</div>
		</div>
		<!--新闻导航模板-->
		<script type="text/html" id="newList">
				{{each newList as value}}
				<a class="mui-control-item" href="#{{value.Id}}">
					{{value.Title}}
				</a>
				{{/each}}
		
		</script>

		<!-- 这个模板是为了以后整个界面切换的，ID是为了绑定切换的，才写的模板 -->
		<script type="text/html" id="newsList">
			<div id="4" class="mui-slider-item mui-control-content mui-active">
				<div id="scroll1" class="mui-scroll-wrapper">
					<div class="mui-scroll">
						<ul class="mui-table-view">
							{{each list as v i}}
								<li class="mui-table-view-cell mui-media" id="{{v.id}}">
									
									{{if v.pics.length == 0}}
									<div class="mui-table-img" style="display: none;"></div>
									{{/if}}
									{{if v.pics.length == 1}}
									<div class="mui-table-img onePic"><img src="{{v.pics[0]}}" class="mui-media-object mui-pull-left"/></div>
									{{/if}}
									<div class="mui-table-text mui-media-body">
										<p class="mui-table-title muipurelyTitle">{{v.title}}</p>
										{{if v.pics.length >= 3}}
										<div class="mui-table-pics muipurelyImg" id="purelyImg">
											{{include "newsListPics" v }}
										</div>
										{{/if}}
										<div class="muipurelytext">
											<p class="mui-table-look muipurelylook clearfix">
												<span class="lookLeft">{{v.publishDate}}{{v.source}}</span>
												<span class="lookRight"><i class="look"></i>{{v.viewCount}}</span>
											</p>
										</div>
										
									</div>
								</li>
							{{/each}}
						</ul>
					</div>
				</div>
			</div>

		</script>

		<!--<li class="mui-table-view-cell">
	        <div class="mui-table-Img"><img src="../img/img1.png"/></div>
	        <div class="mui-table-text">
	        	<p class="mui-table-Tile">2015年全国大众跆拳道一级以上裁判员年审复训培训班</p>
	        	<p class="mui-table-look"><span class="lookLeft">2017年5月20日 中跆协官网</span><span class="lookRight"><i class="look"></i> 5686</span></p>
	        </div>
	    </li>

		<li class="mui-table-view-cell">
	        <div class="muipurelyTitle">2016年亚跆联新品势学习班汇报分享新品势学习班汇报分享</div>
	        <div class="muipurelytext ">								        
	        	<p class="muipurelylook clearfix"><span class="lookLeft">2017年5月20日 CCTV5</span><span class="lookRight"><i class="look"></i> 1.5万</span></p>
	        </div>
	    </li>
	    
	    
	     <li class="mui-table-view-cell viewcellHeight">
	        <div class="muipurelyTitle">中国女子跆拳道队蝉联2016世界杯女子团</div>
	        <div class="muipurelyImg" id="purelyImg">
	        	<img src="../img/timg.jpg" alt=""/>
	        	<img src="../img/timg2.jpg" alt=""/>
	        	<img src="../img/timg3.jpg" alt=""/>
	        </div>
	        <div class="muipurelytext ">								        
	        	<p class="muipurelylook clearfix"><span class="lookLeft">2017年5月20日 CCTV5</span><span class="lookRight"><i class="look"></i> 1.5万</span></p>
	        </div>
	    </li>-->
		<!-- 正常都在这一个模板里，可以用include引入另外的模板 -->
		<!--<script type="text/html" id="newsList">
			{{each list v i}}
			<li class="mui-table-view-cell" id="{{v.id}}">
				{{if v.pics.length == 1}}
					<div class="mui-table-img"><img src="{{v.pics[0]}}" /></div>
				{{/if}} 
				<div class="mui-table-text">
					<p class="mui-table-title">{{v.title}}</p>
					{{if v.pics.length >= 3}}
					<ul class="mui-table-pics">
						{{include "newsListPics" v}}
					</ul>
					{{/if}}
					这行始终都在一行就行了，不用管它那设计图
					<p class="mui-table-look">
						<span class="lookLeft">{{publishDate}}{{source}}</span>
						<span class="lookRight"><i class="look"></i>{{viewCount}}</span>
					</p>
				</div>
			</li>
			{{/each}}
		</script>-->

		<script type="text/html" id="newsListPics">
			{{each pics as v i}}
				<img src="../img/Charity_img1.jpg" attr='{{v}}'>
			{{/each}}
		</script>


		<!--<script type="text/html" id="picNo">
			<li class="mui-table-view-cell picNo" id="{{id}}">
				<div class="muipurelyTitle">{{title}}</div>
				<div class="muipurelytext ">
					<p class="muipurelylook clearfix"><span class="lookLeft">{{publishDate}}{{source}}</span><span class="lookRight"><i class="look"></i> {{viewCount}}</span></p>
				</div>
			</li>
		</script>

		<script type="text/html" id="picOne">
			<li class="mui-table-view-cell" id="{{id}}">
				<div class="mui-table-Img"><img src="{{pics}}" /></div>
				<div class="mui-table-text">
					<p class="mui-table-Tile">{{title}}</p>
					<p class="mui-table-look"><span class="lookLeft">{{publishDate}}{{source}}</span><span class="lookRight"><i class="look"></i> {{viewCount}}</span></p>
				</div>
			</li>
		</script>
		
		<script type="text/html" id="picThree">
			<li class="mui-table-view-cell viewcellHeight" id="{{id}}">
				<div class="muipurelyTitle">{{title}}</div>
				<div class="muipurelyImg" id="purelyImg">
					{{include "purelyImgUrl"}}
				</div>
				<div class="muipurelytext ">
					<p class="muipurelylook clearfix"><span class="lookLeft">{{publishDate}}{{source}}</span><span class="lookRight"><i class="look"></i> {{viewCount}}</span></p>
				</div>
			</li>

		</script>-->


		<script src="../js/flexable.js"></script>
		<script src="../js/mui.min.js"></script>
		<script src="../js/mui.pullToRefresh.js"></script>
		<script src="../js/mui.pullToRefresh.material.js"></script>
		<!--<script
  src="https://code.jquery.com/jquery-3.2.1.js"
  integrity="sha256-DZAnKJ/6XZ9si04Hgrsxu/8s717jcIzLy3oi35EouyE="
  crossorigin="anonymous"></script>-->
  		<script src="../js/artTemplate.js"></script>
  		<script src="../js/jquery.js"></script>
		<script src="../js/newsList1.js"></script>
    	<script src="../js/template-web.js"></script>
		<script type="text/javascript">

			$(document).ready(function() {
				
				var url = 'http://47.93.192.128:5001/News/NewsNavBar';
				$.ajax({
					url: url,
					dataType: 'json',
					type: 'post',
					success: function(data) {
						console.log(data.Data.Data);
						//新闻导航栏的结构
						var str = template("newList", {newList: data.Data.Data})
						$(".newList").html(str);
						$("#sliderSegmentedControl>div a:first-child").addClass("mui-active")
//						$(".activationRecordLi").click(function () {
//					        let id=$(this).attr('id');// 获取id
//					        localStorage.setItem("ActivityId",id)
//					        window.location.href = "training_con.html?id=" + id;
//					    })
					},
					error: function(XMLHttpRequest, textStatus, errorThrown) {
						alert(XMLHttpRequest.status);
						alert(XMLHttpRequest.readyState);
						alert(textStatus);
					}
				});

				var urll="http://47.93.192.128:5001/News/NewsList"
				$.ajax({
					url: "one.json",
//					url:"http://47.93.192.128:5001/News/NewsList",
					dataType: 'json',
					type: 'get',
					data:{
						pageindex:"",	//number	否	页数，不填默认第一页	1
						typeid:3,	//number	否	栏目类型id	1
						proid:"",	//number	否	省id	3
						cityid:"",	//number	否	城市id	5
						areaid:""	//number	否	区域id
					},
					success: function(data) {
						console.log(data.Data.Data);

						//这个模板生成的字符串整个放到外面大容器里
						var htmlStr = template("newsList", {list: data.Data.Data})
						$(".mui-slider-group").html(htmlStr);
						
//						$(".activationRecordLi").click(function () {
//					        let id=$(this).attr('id');// 获取id
//					        localStorage.setItem("ActivityId",id)
//					        window.location.href = "training_con.html?id=" + id;
//					    })
					},
					error: function(XMLHttpRequest, textStatus, errorThrown) {
						alert(textStatus);
					}
				});

			});

		</script>
	</body>
</html>
